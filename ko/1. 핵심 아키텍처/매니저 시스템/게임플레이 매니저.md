# ê²Œì„í”Œë ˆì´ ë§¤ë‹ˆì €

## ğŸ“‹ ê°œìš”

ê²Œì„í”Œë ˆì´ ë§¤ë‹ˆì €ë“¤ì€ ë©”ì´í”Œ ë“€ì–¼ì˜ ì‹¤ì œ ê²Œì„ í”Œë ˆì´ ê²½í—˜ì„ êµ¬ì„±í•˜ëŠ” í•µì‹¬ ì‹œìŠ¤í…œë“¤ì…ë‹ˆë‹¤. ActionManagerëŠ” 200ì—¬ ê°œì˜ ì¹´ë“œë³„ ì• ë‹ˆë©”ì´ì…˜ê³¼ ì´í™íŠ¸ ì‹œí€€ìŠ¤ë¥¼ ì •ë°€í•˜ê²Œ ê´€ë¦¬í•˜ê³ , AuraManagerëŠ” ë³µì¡í•œ ì§€ì† íš¨ê³¼ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì ìš©í•˜ë©°, TargetManagerëŠ” ì§ê´€ì ì¸ íƒ€ê²ŸíŒ… ì‹œìŠ¤í…œì„ ì œê³µí•©ë‹ˆë‹¤. ScoreManagerëŠ” ë´‡ AIì˜ ì˜ì‚¬ê²°ì •ì„ ìœ„í•œ ì •êµí•œ í‰ê°€ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ê³ , EnchantmentManagerëŠ” ì„ì‹œ íš¨ê³¼ë“¤ì˜ ìƒëª…ì£¼ê¸°ë¥¼ ì œì–´í•©ë‹ˆë‹¤. ì´ë“¤ì€ TaskManagerì™€ ê¸´ë°€íˆ í˜‘ë ¥í•˜ì—¬ ë§¤ë„ëŸ½ê³  ì „ëµì ì¸ ê²Œì„í”Œë ˆì´ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.

**ê´€ë ¨ íŒŒì¼**:
- `RootDesk/MyDesk/Components/Managers/ActionManager.mlua`
- `RootDesk/MyDesk/Components/Managers/AuraManager.mlua`
- `RootDesk/MyDesk/Components/Managers/EnchantmentManager.mlua`
- `RootDesk/MyDesk/Components/Managers/TargetManager.mlua`
- `RootDesk/MyDesk/Components/Managers/ScoreManager.mlua`

## ğŸ—ï¸ ê²Œì„í”Œë ˆì´ ë§¤ë‹ˆì € ì•„í‚¤í…ì²˜

### ë§¤ë‹ˆì € ì—°ë™ ì‹œìŠ¤í…œ

```mermaid
graph TB
    A[TaskManager<br/>ê²Œì„ ì§„í–‰ ì œì–´] --> B[ActionManager<br/>ì• ë‹ˆë©”ì´ì…˜ & ì´í™íŠ¸]
    A --> C[TargetManager<br/>íƒ€ê²Ÿ ì„ íƒ ì‹œìŠ¤í…œ]
    A --> D[AuraManager<br/>ì§€ì† íš¨ê³¼ ê´€ë¦¬]
    
    B --> E[ì¹´ë“œë³„ ì‹œê°ì  ì—°ì¶œ]
    C --> F[ì „ëµì  ì¹´ë“œ í”Œë ˆì´]
    D --> G[ë³µì¡í•œ ìƒí˜¸ì‘ìš©]
    
    A --> H[ScoreManager<br/>AI ì ìˆ˜ ê³„ì‚°]
    H --> I[ë´‡ ì˜ì‚¬ê²°ì •]
    
    A --> J[EnchantmentManager<br/>ì„ì‹œ íš¨ê³¼ ê´€ë¦¬]
    J --> K[íš¨ê³¼ ì§€ì†ì„± ì œì–´]
    
    style A fill:#ffcccc
    style B fill:#ccffcc
    style C fill:#ffffcc
    style D fill:#ffccff
    style H fill:#ccffff
    style J fill:#ffffcc
```

## ğŸ¬ 1. ActionManager - ì• ë‹ˆë©”ì´ì…˜ & ì´í™íŠ¸ ê´€ë¦¬ì

### ì¹´ë“œë³„ ì‹œê°ì  ì—°ì¶œ ì‹œìŠ¤í…œ

#### í”„ë¡œì„¸ìŠ¤ ë”œë ˆì´ ì‹œìŠ¤í…œ
```lua
method void OnBeginPlay()
    self.processDelayTable = {
        AirStrike = 3.96,
        ArmorCrash = 1.52,
        ArrowBomb = 1,
        ArrowRain = 3.28,
        AthenaPierce = 1,
        Avenger = 2.32,
        -- ... 200ì—¬ ê°œì˜ ì¹´ë“œë³„ ë”œë ˆì´ ì‹œê°„
    }
    
    self.coreDelayTable = {
        ArrowBlow = 0.25,
        ArrowBomb = 0.15,
        ArrowRain = 0.25,
        Assaulter = 0.33,
        -- ... í•µì‹¬ ì•¡ì…˜ë³„ ë”œë ˆì´
    }
end
```

**ì •ë°€í•œ íƒ€ì´ë° ì œì–´**:
- **ì¹´ë“œë³„ ë§ì¶¤ ë”œë ˆì´**: ê° ì¹´ë“œì˜ ì‹œê°ì  íŠ¹ì„±ì— ë§ëŠ” íƒ€ì´ë°
- **í”„ë¡œì„¸ìŠ¤ êµ¬ë¶„**: PreProcess, Core, PostProcess ë‹¨ê³„ë³„ ê´€ë¦¬
- **ì¼ê´€ì„± ë³´ì¥**: ëª¨ë“  í”Œë ˆì´ì–´ê°€ ë™ì¼í•œ ì‹œê°ì  ê²½í—˜

#### ë³µì¡í•œ ì• ë‹ˆë©”ì´ì…˜ ì‹œí€€ìŠ¤

##### Genesis ì¹´ë“œ ì˜ˆì‹œ - ëŒ€ê·œëª¨ ìŠ¤í‚¬ ì—°ì¶œ
```lua
@ExecSpace("ClientOnly")
method void PreProcessGenesis()
    local player = self.triggerManager.receiver.player
    local resource = self.resourceManager:GetResource("Genesis")
    
    -- 1. í”Œë ˆì´ì–´ ì „ë©´ ë°°ì¹˜
    player:PlaceFront()
    _Tween:MoveTo(player.actor.Entity, Vector2.zero, 0.25, EaseType.CubicEaseOut, true)
    wait(0.25)
    
    -- 2. ìŠ¤í‚¬ ì¤€ë¹„ ë™ì‘
    player:Animate("Alert")
    _Effect:PlaySkillEffectAttached(resource.skillAnimation_1, player, 0.001 * Vector3.back, nil)
    _Effect:PlaySkillEffectAttached(resource.skillAnimation_2, player, Vector3.zero, nil)
    _SoundService:PlaySound(resource.skillSound_1, 1)
    
    -- 3. ë‹¤ì¤‘ ì´í™íŠ¸ ìƒì„±
    local animationArray = {resource.extraAnimation_1, resource.extraAnimation_2, resource.extraAnimation_3}
    local effectPosition = Vector3(0, 0, 900)
    _TimerService:SetTimerOnce(function()
        for i = 1, 3 do
            for j = 1, 5 do
                effectPosition.x = _UtilLogic:RandomDouble() * 10 - 5
                effectPosition.y = _UtilLogic:RandomDouble() * 2 - 2
                _Effect:PlayEffect(_Table:GetRandomElement(animationArray), effectPosition, nil, _Effect:GetUnitLayerOptions(nil))
                effectPosition.z -= 0.001
            end
            wait(0.05)
        end
    end, 0)
end
```

**ê³ ê¸‰ ì—°ì¶œ ê¸°ë²•**:
- **ë‹¤ë‹¨ê³„ ì• ë‹ˆë©”ì´ì…˜**: ì¤€ë¹„ â†’ ì‹¤í–‰ â†’ ë§ˆë¬´ë¦¬
- **ë™ì  ì´í™íŠ¸ ìƒì„±**: ëœë¤ ìœ„ì¹˜ì˜ ë‹¤ì¤‘ ì´í™íŠ¸
- **íƒ€ì´ë° ë™ê¸°í™”**: ì •ë°€í•œ ì‹œê°„ ì œì–´ë¡œ ëª°ì…ê° ê·¹ëŒ€í™”

### ì•¡ì…˜ ë‹¨ê³„ë³„ ì²˜ë¦¬

#### 3ë‹¨ê³„ ì• ë‹ˆë©”ì´ì…˜ íŒŒì´í”„ë¼ì¸
```mermaid
sequenceDiagram
    participant TM as TaskManager
    participant AM as ActionManager
    participant P as Player
    participant E as Effect
    
    TM->>AM: RunProcess(cardName)
    
    AM->>P: PreProcess() ì‹œì‘
    Note right of P: ì¤€ë¹„ ë™ì‘, ìœ„ì¹˜ ì´ë™
    AM->>E: ì¤€ë¹„ ì´í™íŠ¸ ì¬ìƒ
    
    AM->>P: Core() ì‹¤í–‰
    Note right of P: í•µì‹¬ ì•¡ì…˜, ëŒ€ìƒ ì ìš©
    AM->>E: ë©”ì¸ ì´í™íŠ¸ ì¬ìƒ
    
    AM->>P: PostProcess() ì™„ë£Œ
    Note right of P: ë§ˆë¬´ë¦¬ ë™ì‘, ì›ìœ„ì¹˜
    AM->>E: í›„ì† ì´í™íŠ¸ ì¬ìƒ
    
    AM->>TM: ì• ë‹ˆë©”ì´ì…˜ ì™„ë£Œ
```

#### ì´í™íŠ¸ ì¢…ë¥˜ë³„ íŠ¹í™” ì²˜ë¦¬

**ìŠ¤í‚¬ ì´í™íŠ¸**:
```lua
-- ëŒ€ìƒí˜• ìŠ¤í‚¬ (Flamethrower)
_Effect:PlayHitEffect(resource.hitAnimation_1, minion, Vector3.zero, player, nil)

-- ë²”ìœ„ ìŠ¤í‚¬ (Genesis)  
_Effect:PlaySkillEffect(resource.skillAnimation_1, player, Vector3.zero, {FadeOut = true})

-- ë¶€ì°©í˜• ì´í™íŠ¸ (ê°•í™” íš¨ê³¼)
_Effect:PlaySkillEffectAttached(resource.skillAnimation_1, player, Vector3(0.42, 0.28, 0), nil)
```

## ğŸŒŸ 2. AuraManager - ì§€ì† íš¨ê³¼ ê´€ë¦¬ì

### ì˜¤ë¼ íš¨ê³¼ ì‹œìŠ¤í…œ

#### ì¹´ë“œë³„ ì˜¤ë¼ ì •ì˜
```lua
-- ë¹„ìš© ê°ì†Œ ì˜¤ë¼ (Shumi)
method table ShumiEnchantments()
    return {
        {methodName = "AddCostEnchantment", args = {-1}}
    }
end

method table ShumiTargets(Minion minion)
    return minion.player.hand:GetCards(self.taskManager.minionSelector)
end

-- ì¡°ê±´ë¶€ ê³µê²©ë ¥ ì¦ê°€ (Chicken)
method table ChickenEnchantments()
    return {
        {methodName = "AddAtkEnchantment", args = {3}}
    }
end

method table ChickenTargets(Minion minion)
    if minion:IsDamaged() then
        return {minion}
    end
end
```

**ì˜¤ë¼ ì‹œìŠ¤í…œ íŠ¹ì§•**:
- **ë™ì  ëŒ€ìƒ ì„ íƒ**: ì¡°ê±´ì— ë”°ë¥¸ ì ìš© ëŒ€ìƒ ë³€ê²½
- **ë‹¤ì–‘í•œ ì¸ì±ˆíŠ¸ë¨¼íŠ¸**: ë¹„ìš©, ê³µê²©ë ¥, ìŠ¤í‚¬ ë°ë¯¸ì§€ ë“± ìˆ˜ì •
- **ì‹¤ì‹œê°„ ì ìš©**: ê²Œì„ ìƒí™© ë³€í™”ì— ì¦‰ì‹œ ë°˜ì‘

#### ë³µì¡í•œ ì¡°ê±´ë¶€ ì˜¤ë¼

##### Panda - ì¡°ê±´ë¶€ ë¹„ìš© ê°ì†Œ
```lua
method table PandaEnchantments(Card card)
    return {
        {methodName = "AddCostEnchantment", args = {-self.history:GetThisRoundMinionCountByTag(card.player, "Pet")}}
    }
end

method table PandaTargets(Card card)
    return {card}
end
```

**ê³ ê¸‰ ì¡°ê±´ ì²˜ë¦¬**:
- **ë™ì  ê°’ ê³„ì‚°**: ê²Œì„ ìƒíƒœ ê¸°ë°˜ íš¨ê³¼ í¬ê¸° ê²°ì •
- **íƒœê·¸ ê¸°ë°˜ ê³„ì‚°**: íŠ¹ì • íƒœê·¸ ë¯¸ë‹ˆì–¸ ìˆ˜ì— ë”°ë¥¸ íš¨ê³¼
- **ë¼ìš´ë“œë³„ ì¶”ì **: History ë§¤ë‹ˆì €ì™€ ì—°ë™

### ì˜¤ë¼ ì ìš© ë° í•´ì œ

#### ëŒ€ìƒ ê²€ì¦ ì‹œìŠ¤í…œ
```lua
method table GetTargets(any object, string auraName)
    -- ë¯¸ë‹ˆì–¸ì€ í•„ë“œì— ìˆì–´ì•¼ í•¨
    if object:IsMinion() then
        if not isvalid(object.field) then
            return {}
        end
    -- ì¹´ë“œëŠ” ì†íŒ¨ë‚˜ ë±ì— ìˆì–´ì•¼ í•¨
    elseif object:IsCard() then
        if not isvalid(object.hand) and not isvalid(object.deck) then
            return {}
        end
    end
    
    return _Util:Call(self, auraName .. "Targets", {object}) or {}
end
```

## ğŸ¯ 3. TargetManager - íƒ€ê²Ÿ ì„ íƒ ê´€ë¦¬ì

### íƒ€ê²ŸíŒ… ì‹œìŠ¤í…œ

#### ì¹´ë“œë³„ íƒ€ê²Ÿ ë²”ìœ„ ì •ì˜
```lua
-- ëª¨ë“  ë¯¸ë‹ˆì–¸ ëŒ€ìƒ (ì¼ë°˜ì ì¸ ë‹¨ì¼ ëŒ€ìƒ ìŠ¤í‚¬)
method table Doom(Card card)
    return self.duel:GetMinions(nil)
end

-- ëª¨ë“  ìœ ë‹› ëŒ€ìƒ (í”Œë ˆì´ì–´ í¬í•¨)
method table DragonBlood(Card card)
    return self.duel:GetUnits()
end

-- ì œí•œëœ ëŒ€ìƒ (ìì‹ ì˜ ë¯¸ë‹ˆì–¸ë§Œ)
method table Sacrifice(Card card)
    return card.player.field:GetMinions(nil)
end

-- ì¡°ê±´ë¶€ ëŒ€ìƒ (í”¼í•´ë°›ì€ ë¯¸ë‹ˆì–¸ë§Œ)
method table FinalAttack(Card card)
    return self.duel:GetMinions(self.taskManager.damagedSelector)
end
```

#### ë™ì  íƒ€ê²Ÿ ê²€ì¦
```lua
@ExecSpace("ServerOnly")
method table GetCardTargetables(Card card)
    local targetableArray = _Util:Call(self, card.name, {card})
    if targetableArray then
        local ret = {}
        for _, targetable in ipairs(targetableArray) do
            if targetable:IsTargetable(card.player) then
                table.insert(ret, targetable)
            end
        end
        return ret
    else
        return {}
    end
end
```

**ì„œë²„ ì¸¡ ê²€ì¦**:
- **ì´ì¤‘ ê²€ì¦**: ê¸°ë³¸ ëŒ€ìƒ í’€ + ì‹¤ì œ íƒ€ê²ŸíŒ… ê°€ëŠ¥ì„± í™•ì¸
- **ì¹˜íŒ… ë°©ì§€**: ì„œë²„ì—ì„œë§Œ ìµœì¢… íƒ€ê²Ÿ ê²€ì¦
- **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸**: ê²Œì„ ìƒí™© ë³€í™”ì— ë”°ë¥¸ ëŒ€ìƒ ëª©ë¡ ê°±ì‹ 

### íƒ€ê²ŸíŒ… íŒ¨í„´ ë¶„ë¥˜

#### íƒ€ê²Ÿ ë²”ìœ„ë³„ ë¶„ë¥˜
```mermaid
graph TB
    A[TargetManager] --> B[ì „ì²´ ëŒ€ìƒ]
    A --> C[ì œí•œëœ ëŒ€ìƒ]
    A --> D[ì¡°ê±´ë¶€ ëŒ€ìƒ]
    
    B --> B1[ëª¨ë“  ë¯¸ë‹ˆì–¸<br/>Doom, Snipe]
    B --> B2[ëª¨ë“  ìœ ë‹›<br/>DragonBlood, FireArrow]
    
    C --> C1[ìì‹  ë¯¸ë‹ˆì–¸<br/>Sacrifice, Disorder]
    C --> C2[ìƒëŒ€ë°© ë¯¸ë‹ˆì–¸<br/>Steal]
    C --> C3[ìƒëŒ€ë°© ìœ ë‹›<br/>Rush]
    
    D --> D1[í”¼í•´ë°›ì€ ë¯¸ë‹ˆì–¸<br/>FinalAttack]
    D --> D2[íŠ¹ì • ì„ íƒì<br/>ì¡°ê±´ë¶€ í•„í„°ë§]
```

## ğŸ¤– 4. ScoreManager - AI ì ìˆ˜ ê³„ì‚° ì‹œìŠ¤í…œ

### ë´‡ ì˜ì‚¬ê²°ì • ì§€ì›

#### ì¹´ë“œë³„ ì ìˆ˜ ê³„ì‚°
```lua
-- ê¸°ë³¸ ì ìˆ˜ ê³„ì‚°
method number GetScore(Card card, Unit target, Minion pivot)
    return _Util:Call(self, card.name, {card, target, pivot}) or 1
end

-- PowerStrike ì ìˆ˜ ê³„ì‚° - ë³µì¡í•œ ë°ë¯¸ì§€ ê³„ì‚°
method number PowerStrike(Card card, Minion target, Minion pivot)
    local sign = target.player == card.player and -1 or 1 
    local damage = 5 + card.player.skillDamage
    local value
    
    if 3 <= target.hp and target.hp <= damage then
        value = 2  -- í™•ì‹¤í•œ ì²˜ì¹˜
    elseif target.hp > damage then
        value = 1  -- ë°ë¯¸ì§€ë§Œ
    else
        value = 0  -- ê³¼ì‰ ë°ë¯¸ì§€
    end
    
    return sign * value - 1
end
```

#### ì „ëµì  ì ìˆ˜ ê³„ì‚°

##### ìƒí™© ì¸ì‹ AI
```lua
-- ì¡°ê±´ë¶€ ì ìˆ˜ ê³„ì‚° (Mai)
method number Mai(Card card, Unit target, Minion pivot)
    return #card.player.field:GetMinions(nil) >= 1 and 1 or -1
end

-- í•„ë“œ ìš°ì„¸ ê³„ì‚° (Griffey)
method number Griffey(Card card, Unit target, Minion pivot)
    return #card.player.opponent.field:GetMinions(nil) - #card.player.field:GetMinions(nil)
end

-- ìœ„ì¹˜ ê¸°ë°˜ ê³„ì‚° (DancesWithBalrog)
method number DancesWithBalrog(Card card, Unit target, Minion pivot)
    return card.player.field:GetRightmostMinion() == pivot and 1 or 0
end
```

**AI ê³„ì‚° ìš”ì†Œ**:
- **ìƒëŒ€/ì•„êµ° êµ¬ë¶„**: sign ë³€ìˆ˜ë¡œ ì /ì•„êµ° ê°€ì¹˜ ë°˜ì „
- **íš¨ìœ¨ì„± í‰ê°€**: ë°ë¯¸ì§€ ëŒ€ë¹„ ì²´ë ¥ ë¹„ìœ¨ ê³„ì‚°
- **ì „ëµì  ê°€ì¹˜**: í•„ë“œ ìƒí™©, ìœ„ì¹˜, ì¡°ê±´ ì¢…í•© í‰ê°€
- **ë¦¬ìŠ¤í¬ ê´€ë¦¬**: ê³¼ì‰ íˆ¬ìë‚˜ ë‚­ë¹„ ë°©ì§€

### ì ìˆ˜ ì‹œìŠ¤í…œ íŒ¨í„´

#### ì ìˆ˜ ê³„ì‚° ë¶„ë¥˜
```mermaid
graph TB
    A[ScoreManager] --> B[ë‹¨ìˆœ ë°ë¯¸ì§€ ê³„ì‚°]
    A --> C[ì¡°ê±´ë¶€ ê°€ì¹˜ ê³„ì‚°]  
    A --> D[ì „ëµì  ìš°ìœ„ ê³„ì‚°]
    
    B --> B1[ê³ ì • ë°ë¯¸ì§€<br/>FireArrow, DoubleShot]
    B --> B2[ë¹„ë¡€ ë°ë¯¸ì§€<br/>FinalAttack, CorkscrewBlow]
    
    C --> C1[í•„ë“œ ì¡°ê±´<br/>Mai, ThreeSnails]
    C --> C2[ì²´ë ¥ ì¡°ê±´<br/>DragonBlood, FireArrow]
    C --> C3[ìœ„ì¹˜ ì¡°ê±´<br/>DancesWithBalrog, RedKentaurus]
    
    D --> D1[í•„ë“œ ìš°ì„¸<br/>Griffey, Mano]
    D --> D2[ì¹´ë“œ ìˆ˜ ìš°ìœ„<br/>Shumi, Focus]
    D --> D3[í„´ ê¸°ë°˜ ê°€ì¹˜<br/>MasterSergeantFox, Utah]
```

## âš¡ 5. EnchantmentManager - ì„ì‹œ íš¨ê³¼ ê´€ë¦¬ì

### ì¸ì±ˆíŠ¸ë¨¼íŠ¸ ìƒëª…ì£¼ê¸° ê´€ë¦¬

#### ì œê±° ì¡°ê±´ ì‹œìŠ¤í…œ
```lua
-- ë¼ìš´ë“œ ì¢…ë£Œ ì‹œ ì œê±° (Focus)
method boolean Focus(Player player, table remover, table objectArray, string taskName, table args, table eachArgs)
    if taskName == "EndRound" then
        return true  -- ì œê±° ì¡°ê±´ ë§Œì¡±
    end
    
    return false
end

-- íŠ¹ì • ì•¡ì…˜ ì‹œ ì œê±° (Reindeer)
method boolean Reindeer(Player player, table remover, table objectArray, string taskName, table args, table eachArgs)
    if taskName == "Play" then
        local card = objectArray[1]
        if card.player == player and card.category == "Minion" then
            return true  -- ë¯¸ë‹ˆì–¸ í”Œë ˆì´ ì‹œ ì œê±°
        end
    end
    
    return false
end
```

**ì œê±° ì¡°ê±´ íŒ¨í„´**:
- **ì‹œê°„ ê¸°ë°˜**: ë¼ìš´ë“œ/í„´ ì¢…ë£Œ ì‹œì 
- **ì•¡ì…˜ ê¸°ë°˜**: íŠ¹ì • ì¹´ë“œ í”Œë ˆì´, ê³µê²© ë“±
- **ìƒíƒœ ê¸°ë°˜**: ì²´ë ¥ ë³€í™”, ìœ„ì¹˜ ì´ë™ ë“±

## ğŸ”„ 6. ë§¤ë‹ˆì € ê°„ í˜‘ì—… ì‹œìŠ¤í…œ

### ê²Œì„í”Œë ˆì´ í”Œë¡œìš° í†µí•©

#### ì¹´ë“œ í”Œë ˆì´ ì‹œ ë§¤ë‹ˆì € ì—°ë™
```mermaid
sequenceDiagram
    participant TM as TaskManager
    participant TAR as TargetManager
    participant AM as ActionManager
    participant AU as AuraManager
    participant SM as ScoreManager
    
    TM->>TAR: íƒ€ê²Ÿ ì§€ì • í•„ìš” í™•ì¸
    TAR->>TM: ìœ íš¨í•œ íƒ€ê²Ÿ ëª©ë¡ ë°˜í™˜
    
    TM->>SM: AI ì ìˆ˜ ê³„ì‚° (ë´‡ í”Œë ˆì´ì–´)
    SM->>TM: ìµœì  íƒ€ê²Ÿ ì ìˆ˜ ë°˜í™˜
    
    TM->>AM: ì• ë‹ˆë©”ì´ì…˜ ì‹œí€€ìŠ¤ ì‹œì‘
    AM->>AU: ì˜¤ë¼ íš¨ê³¼ ì ìš© í™•ì¸
    AU->>AM: ì¸ì±ˆíŠ¸ë¨¼íŠ¸ ì •ë³´ ë°˜í™˜
    
    AM->>TM: ì• ë‹ˆë©”ì´ì…˜ ì™„ë£Œ
    TM->>AU: ìƒˆë¡œìš´ ì˜¤ë¼ íš¨ê³¼ ì ìš©
```

### ì„±ëŠ¥ ìµœì í™”

#### ì§€ì—° í‰ê°€ ì‹œìŠ¤í…œ
```lua
-- í•„ìš”í•  ë•Œë§Œ ê³„ì‚°í•˜ëŠ” ì˜¤ë¼ íƒ€ê²Ÿ
method table GetTargets(any object, string auraName)
    if not self:IsObjectValid(object) then
        return {}  -- ë¹ ë¥¸ ì‹¤íŒ¨
    end
    
    return _Util:Call(self, auraName .. "Targets", {object}) or {}
end

-- ì¡°ê±´ë¶€ ì ìˆ˜ ê³„ì‚° ìºì‹±
local scoreCache = {}
method number GetScore(Card card, Unit target, Minion pivot)
    local cacheKey = self:GenerateCacheKey(card, target, pivot)
    if scoreCache[cacheKey] then
        return scoreCache[cacheKey]
    end
    
    local score = _Util:Call(self, card.name, {card, target, pivot}) or 1
    scoreCache[cacheKey] = score
    return score
end
```

## ğŸ’¡ ì½”ë“œ ì°¸ì¡°

ê²Œì„í”Œë ˆì´ ë§¤ë‹ˆì € í•µì‹¬ ë¡œì§:
- `ActionManager.mlua :: PreProcessGenesis()` â€” ëŒ€ê·œëª¨ ìŠ¤í‚¬ ì• ë‹ˆë©”ì´ì…˜ ì‹œí€€ìŠ¤
- `AuraManager.mlua :: GetTargets()` â€” ë™ì  ì˜¤ë¼ ëŒ€ìƒ ì„ íƒ
- `TargetManager.mlua :: GetCardTargetables()` â€” ì„œë²„ ì¸¡ íƒ€ê²Ÿ ê²€ì¦
- `ScoreManager.mlua :: PowerStrike()` â€” ë³µì¡í•œ AI ì ìˆ˜ ê³„ì‚°
- `EnchantmentManager.mlua :: Reindeer()` â€” ì¡°ê±´ë¶€ íš¨ê³¼ ì œê±°

ê²Œì„í”Œë ˆì´ ë§¤ë‹ˆì €ë“¤ì€ ë©”ì´í”Œ ë“€ì–¼ì˜ ì „ëµì„±ê³¼ ì‹œê°ì  ë§¤ë ¥ì„ êµ¬í˜„í•˜ëŠ” í•µì‹¬ ì‹œìŠ¤í…œìœ¼ë¡œ, ê°ê°ì˜ ì „ë¬¸ ì˜ì—­ì—ì„œ ìµœì í™”ëœ ê¸°ëŠ¥ì„ ì œê³µí•˜ë©° ì„œë¡œ ìœ ê¸°ì ìœ¼ë¡œ ì—°ë™ë˜ì–´ í’ë¶€í•˜ê³  ëª°ì…ê° ìˆëŠ” ê²Œì„ ê²½í—˜ì„ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤.
