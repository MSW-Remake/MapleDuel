# í•µì‹¬ ë§¤ë‹ˆì €

## ğŸ“‹ ê°œìš”

ë©”ì´í”Œ ë“€ì–¼ì˜ í•µì‹¬ ë§¤ë‹ˆì € ì‹œìŠ¤í…œì€ ê²Œì„ì˜ ëª¨ë“  ì£¼ìš” ë°ì´í„°ì™€ ë¡œì§ì„ ì¤‘ì•™ì§‘ì¤‘ì‹ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ì•„í‚¤í…ì²˜ì˜ í•µì‹¬ì…ë‹ˆë‹¤. CardManagerëŠ” 266ê°œì˜ ì¹´ë“œ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³ , CommandManagerëŠ” ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ê°„ ëª¨ë“  ê²Œì„ ëª…ë ¹ì„ ë™ê¸°í™”í•˜ë©°, DeckManagerëŠ” ë± êµ¬ì„± ê·œì¹™ì„ ê°•ì œí•˜ê³ , TriggerManagerëŠ” ë³µì¡í•œ ì¹´ë“œ íš¨ê³¼ì˜ ì—°ì‡„ ì‹¤í–‰ì„ ì¡°ìœ¨í•©ë‹ˆë‹¤. ì´ë“¤ì€ ì„œë¡œ ìœ ê¸°ì ìœ¼ë¡œ ì—°ë™ë˜ì–´ ê²Œì„ì˜ ì¼ê´€ì„±ê³¼ ì•ˆì •ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.

**ê´€ë ¨ íŒŒì¼**: 
- `RootDesk/MyDesk/Components/Managers/CardManager.mlua`
- `RootDesk/MyDesk/Components/Managers/CommandManager.mlua`
- `RootDesk/MyDesk/Components/Managers/DeckManager.mlua`
- `RootDesk/MyDesk/Components/Managers/TriggerManager.mlua`

## ğŸ—ï¸ í•µì‹¬ ë§¤ë‹ˆì € ì•„í‚¤í…ì²˜

### ë§¤ë‹ˆì € ê°„ ìƒí˜¸ê´€ê³„

```mermaid
graph TB
    A[CardManager<br/>ì¹´ë“œ ë°ì´í„° ê´€ë¦¬] --> B[DeckManager<br/>ë± ê²€ì¦ ë° ê´€ë¦¬]
    A --> C[TriggerManager<br/>ì¹´ë“œ íš¨ê³¼ ì‹¤í–‰]
    
    D[CommandManager<br/>ëª…ë ¹ ë™ê¸°í™”] --> E[ëª¨ë“  ê²Œì„ ì•¡ì…˜]
    D --> F[ì„œë²„-í´ë¼ì´ì–¸íŠ¸ í†µì‹ ]
    
    B --> G[ë± êµ¬ì„± ê·œì¹™ ê°•ì œ]
    C --> H[ì¹´ë“œ íŠ¸ë¦¬ê±° ì²˜ë¦¬]
    
    E --> I[TaskManager ì—°ë™]
    E --> J[UI ì‹œìŠ¤í…œ ì—°ë™]
    
    style A fill:#ffcccc
    style D fill:#ccffcc
    style B fill:#ffffcc
    style C fill:#ffccff
```

## ğŸ´ 1. CardManager - ì¹´ë“œ ë°ì´í„° ê´€ë¦¬ì

### ì¹´ë“œ ë°ì´í„° í†µí•© ê´€ë¦¬

#### CSV ê¸°ë°˜ ë°ì´í„° ë¡œë”©
```lua
method void OnBeginPlay()
    self.dataSet = _DataService:GetTable("Card")
    self.allCardNameArray = self.dataSet:GetColumn("name")
    
    -- ë¹„ìš©ìˆœ ì •ë ¬
    _Table:StableSort(self.allCardNameArray, function(left, right) 
        return self:GetCost(left) < self:GetCost(right) 
    end)
end
```

CardManagerëŠ” ì‹œì‘ ì‹œ Card.csvì˜ ëª¨ë“  ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ë¡œ ë¡œë”©í•˜ê³  ë‹¤ì–‘í•œ ì¸ë±ì‹± í…Œì´ë¸”ì„ ìƒì„±í•©ë‹ˆë‹¤.

#### ë‹¤ì°¨ì› ì¸ë±ì‹± ì‹œìŠ¤í…œ
```mermaid
graph TB
    A[Card.csv ì›ë³¸ ë°ì´í„°] --> B[CardManager ì¸ë±ì‹±]
    
    B --> C[ì§ì—…ë³„ ë¶„ë¥˜]
    C --> C1[classCardNameTable]
    C --> C2[classMinionNameTable]
    C --> C3[classSkillNameTable]
    
    B --> D[ë¹„ìš©ë³„ ë¶„ë¥˜]
    D --> D1[costCardNameTable]
    D --> D2[costMinionNameTable]
    D --> D3[costSkillNameTable]
    
    B --> E[íƒœê·¸ë³„ ë¶„ë¥˜]
    E --> E1[tagCardNameTable]
    E --> E2[tagMinionNameTable]
    E --> E3[tagSkillNameTable]
    
    B --> F[ê¸°íƒ€ ë¶„ë¥˜]
    F --> F1[cardNameArray - í† í° ì œì™¸]
    F --> F2[minionNameArray]
    F --> F3[skillNameArray]
```

### ì¹´ë“œ ì •ë³´ ì ‘ê·¼ì

#### í•µì‹¬ ì¹´ë“œ ë°ì´í„° ë©”ì„œë“œë“¤
```lua
-- ì¹´ë“œ ê¸°ë³¸ ì •ë³´
method string GetCategory(string name)    -- "Minion" ë˜ëŠ” "Skill"
method string GetClass(string name)       -- "Warrior", "Magician" ë“±
method string GetTheme(string name)       -- í…Œë§ˆ ì •ë³´
method string GetRarity(string name)      -- "Normal", "Rare" ë“±
method integer GetCost(string name)       -- MP ë¹„ìš©
method boolean IsToken(string name)       -- í† í° ì¹´ë“œ ì—¬ë¶€

-- ë¯¸ë‹ˆì–¸ ì „ìš© ì •ë³´
method integer GetMaxHp(string name)      -- ìµœëŒ€ ì²´ë ¥
method integer GetAtk(string name)        -- ê³µê²©ë ¥
method boolean HasBarrier(string name)    -- ë°©ì–´ë§‰ ë³´ìœ  ì—¬ë¶€

-- ìŠ¤í‚¬ ì „ìš© ì •ë³´  
method integer GetDamage(string name)     -- ìŠ¤í‚¬ ë°ë¯¸ì§€
method integer GetHeal(string name)       -- íšŒë³µëŸ‰

-- íƒœê·¸ ì‹œìŠ¤í…œ
method table GetTags(string name)         -- ì¹´ë“œì˜ ëª¨ë“  íƒœê·¸ ë°°ì—´
```

### ì¹´ë“œ ë¶„ë¥˜ ë° í•„í„°ë§

#### íš¨ìœ¨ì ì¸ ì¹´ë“œ ê²€ìƒ‰
```lua
-- íŠ¹ì • ì¡°ê±´ì˜ ì¹´ë“œ ì°¾ê¸°
local warriorMinions = self.classMinionNameTable["Warrior"]  -- ì „ì‚¬ ë¯¸ë‹ˆì–¸ë“¤
local cost3Cards = self.costCardNameTable[3]                -- 3ì½”ìŠ¤íŠ¸ ì¹´ë“œë“¤
local dragonCards = self.tagCardNameTable["Dragon"]         -- ë“œë˜ê³¤ íƒœê·¸ ì¹´ë“œë“¤
```

**ê²€ìƒ‰ ìµœì í™”**:
- **ì‚¬ì „ ì¸ë±ì‹±**: ê²Œì„ ì‹œì‘ ì‹œ ëª¨ë“  ë¶„ë¥˜ í…Œì´ë¸” ìƒì„±
- **O(1) ì ‘ê·¼**: í•´ì‹œ í…Œì´ë¸” ê¸°ë°˜ ì¦‰ì‹œ ê²€ìƒ‰
- **ë©”ëª¨ë¦¬ íŠ¸ë ˆì´ë“œì˜¤í”„**: ë¹ ë¥¸ ê²€ìƒ‰ì„ ìœ„í•œ ë©”ëª¨ë¦¬ ì‚¬ìš©

## ğŸ¯ 2. CommandManager - ëª…ë ¹ ë™ê¸°í™” ê´€ë¦¬ì

### í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ëª…ë ¹ ì‹œìŠ¤í…œ

#### ëª…ë ¹ ì‹¤í–‰ íë¦„
```mermaid
sequenceDiagram
    participant C as Client
    participant CM as CommandManager
    participant S as Server
    participant TM as TaskManager
    
    C->>CM: RunCommand("Play", publicArgs, privateArgs)
    CM->>CM: ì…ë ¥ ìƒíƒœ ì´ˆê¸°í™”
    CM->>S: ì„œë²„ë¡œ ëª…ë ¹ ì „ì†¡
    
    S->>CM: VerifyCommand() ê²€ì¦
    alt ê²€ì¦ ì„±ê³µ
        S->>TM: ëª…ë ¹ ì‹¤í–‰
        S->>CM: ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ì— ë¸Œë¡œë“œìºìŠ¤íŠ¸
        CM->>C: RunCommandInClient() ì‹¤í–‰
    else ê²€ì¦ ì‹¤íŒ¨
        S->>C: OnVerifyCommandFailed() í˜¸ì¶œ
        CM->>C: "Unable" í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í‘œì‹œ
    end
```

#### ëª…ë ¹ ê²€ì¦ ì‹œìŠ¤í…œ
```lua
@ExecSpace("ServerOnly")
method boolean VerifyCommand(string commandName, table args, integer commandId)
    -- ëª…ë ¹ ID ê²€ì¦ (ë™ê¸°í™” ë³´ì¥)
    if self.duel.commandId ~= commandId then
        return false
    end
    
    -- ê°œë³„ ëª…ë ¹ ê²€ì¦ ì‹¤í–‰
    return _Util:Call(self, "Verify" .. commandName, args)
end
```

**ë³´ì•ˆ ê²€ì¦ ë‹¨ê³„**:
1. **ëª…ë ¹ ID ë™ê¸°í™”**: ê²Œì„ ìƒíƒœ ì¼ì¹˜ í™•ì¸
2. **ê°œë³„ ê²€ì¦**: ê° ëª…ë ¹ë³„ ì¡°ê±´ í™•ì¸
3. **ê¶Œí•œ ê²€ì¦**: ëª…ë ¹ ì‹¤í–‰ ê¶Œí•œ í™•ì¸
4. **ìƒíƒœ ê²€ì¦**: ê²Œì„ ìƒí™©ì— ë§ëŠ” ëª…ë ¹ì¸ì§€ í™•ì¸

### íŒ¨í‚¤ì§€ ì‹œìŠ¤í…œ

#### ë³µì¡í•œ ë°ì´í„° ë™ê¸°í™”
```lua
-- ì„œë²„ì—ì„œ ë°ì´í„° ì „ì†¡
if self:IsServer() then
    local complexData = self:CalculateComplexData()
    self.commandManager:PushPackage(complexData)
else
    -- í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë°ì´í„° ìˆ˜ì‹ 
    local complexData = self.commandManager:PopPackage()
end
```

**íŒ¨í‚¤ì§€ ì‹œìŠ¤í…œ íŠ¹ì§•**:
- **ë™ê¸°í™” ë³´ì¥**: ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ê°„ ë™ì¼í•œ ë°ì´í„°
- **ë³µì¡í•œ ê°ì²´**: ì¹´ë“œ, ë¯¸ë‹ˆì–¸ ë“±ì˜ ì „ì²´ ì •ë³´ ì „ì†¡
- **ìˆœì„œ ë³´ì¥**: FIFO ë°©ì‹ì˜ ì•ˆì „í•œ ë°ì´í„° ì „ë‹¬

### ì…ë ¥ ìƒíƒœ ê´€ë¦¬

#### ìƒí™©ë³„ ì…ë ¥ ì œì–´
```mermaid
graph TB
    A[ì‚¬ìš©ì ì…ë ¥] --> B[ì…ë ¥ ìƒíƒœ í™•ì¸]
    B --> C{í˜„ì¬ ìƒíƒœ}
    
    C -->|Idle| D[ì…ë ¥ í—ˆìš©]
    C -->|Playing| E[ì¹´ë“œ í”Œë ˆì´ë§Œ í—ˆìš©]
    C -->|Waiting| F[ì…ë ¥ ì°¨ë‹¨]
    C -->|Targeting| G[íƒ€ê²Ÿ ì„ íƒë§Œ í—ˆìš©]
    
    D --> H[ëª…ë ¹ ì‹¤í–‰]
    E --> H
    G --> H
    F --> I[ì…ë ¥ ë¬´ì‹œ]
```

## ğŸ“š 3. DeckManager - ë± ê´€ë¦¬ì

### ë± ê²€ì¦ ì‹œìŠ¤í…œ

#### í¬ê´„ì  ë± ìœ íš¨ì„± ê²€ì‚¬
```lua
method boolean IsDeckValid(table deck)
    -- ê¸°ë³¸ êµ¬ì¡° ê²€ì¦
    if _Table:IsEmpty(deck) then return false end
    
    -- ì§ì—… ìœ íš¨ì„± ê²€ì¦
    if not (deck.class == "Warrior" or deck.class == "Magician" or 
            deck.class == "Bowman" or deck.class == "Thief" or 
            deck.class == "Pirate") then
        return false
    end
    
    -- ë± ì´ë¦„ ê²€ì¦
    if _UtilLogic:IsNilorEmptyString(deck.name) then return false end
    
    -- ì¹´ë“œ êµ¬ì„± ê²€ì¦
    if deck.cardTable ~= nil then
        if self:GetDeckSize(deck) > 20 then return false end
        
        for name, _ in pairs(deck.cardTable) do
            local class = self.cardManager:GetClass(name)
            -- ì§ì—… ì œí•œ ê²€ì¦
            if not (class == "Common" or class == deck.class) then
                return false
            end
            
            -- ì¹´ë“œ ìˆ˜ëŸ‰ ì œí•œ ê²€ì¦  
            if self:GetCardCountByName(deck, name) > 2 then
                return false
            end
        end
    end
    
    return true
end
```

#### ë± ì™„ì„±ë„ ê²€ì‚¬
```lua
method boolean IsDeckComplete(table deck)
    if not self:IsDeckValid(deck) then return false end
    return self:GetDeckSize(deck) == 20
end
```

### ë± í¬ê¸° ë° ì¹´ë“œ ê³„ì‚°

#### ì •ë°€í•œ ì¹´ë“œ ê°œìˆ˜ ê´€ë¦¬
```mermaid
graph TB
    A[ë± ì¹´ë“œ í…Œì´ë¸”] --> B[ì¹´ë“œë³„ ë°˜ë³µ]
    B --> C[ë³€í˜•ë³„ ë°˜ë³µ]
    C --> D[í’ˆì§ˆë³„ ë°˜ë³µ]
    D --> E[ê°œìˆ˜ ëˆ„ì ]
    
    E --> F[ì´ ë± í¬ê¸°]
    E --> G[ì¹´ë“œëª…ë³„ ê°œìˆ˜]
    E --> H[íŠ¹ì • ì¹´ë“œ ì •ë³´ë³„ ê°œìˆ˜]
```

**ì¹´ë“œ ê³„ì‚° ë©”ì„œë“œë“¤**:
- `GetDeckSize(deck)` â€” ë±ì˜ ì´ ì¹´ë“œ ìˆ˜
- `GetCardCountByName(deck, name)` â€” íŠ¹ì • ì¹´ë“œëª…ì˜ ì´ ê°œìˆ˜
- `GetCardCountByInfo(deck, info)` â€” ì •í™•í•œ ì¹´ë“œ ì •ë³´ì˜ ê°œìˆ˜

### ë± ìƒì„± ë° ê´€ë¦¬

#### ìƒˆ ë± ìƒì„± ì‹œìŠ¤í…œ
```lua
method table GetNewDeck(string class, string localeId)
    local adjective = self.adjectiveArray[_UtilLogic:RandomIntegerRange(1, #self.adjectiveArray)]
    local name = _LocalizationService:GetText(adjective) .. " " .. _LocalizationService:GetText(class)
    
    return {
        class = class,
        name = name,
        cardTable = {}  -- ë¹ˆ ì¹´ë“œ í…Œì´ë¸”
    }
end
```

**ìë™ ì´ë¦„ ìƒì„±**:
- Deck.csvì—ì„œ í˜•ìš©ì‚¬ ëª©ë¡ ë¡œë”©
- ëœë¤ í˜•ìš©ì‚¬ + ì§ì—…ëª… ì¡°í•©
- ë‹¤êµ­ì–´ ì§€ì› (`ko`, `en` ë“±)

## ğŸ­ 4. TriggerManager - íŠ¸ë¦¬ê±° ì‹œìŠ¤í…œ ê´€ë¦¬ì

### íŠ¸ë¦¬ê±° ì‹¤í–‰ ì—”ì§„

#### ê³„ì¸µì  íŠ¸ë¦¬ê±° ì²˜ë¦¬
```mermaid
sequenceDiagram
    participant TM as TaskManager
    participant TR as TriggerManager
    participant C1 as Card1
    participant C2 as Card2
    participant C3 as Card3
    
    TM->>TR: InvokeTriggers("Play", [C1], [C1,C2,C3])
    
    loop ê° invoker
        TR->>TR: RunTriggers(C1 -> C1)
        TR->>C1: ìê¸° ìì‹  íŠ¸ë¦¬ê±° í™•ì¸
        TR->>TR: RunTriggers(C1 -> C2)  
        TR->>C2: ë‹¤ë¥¸ ì¹´ë“œ íŠ¸ë¦¬ê±° í™•ì¸
        TR->>TR: RunTriggers(C1 -> C3)
        TR->>C3: ë‹¤ë¥¸ ì¹´ë“œ íŠ¸ë¦¬ê±° í™•ì¸
    end
```

#### íŠ¸ë¦¬ê±° ì¡°ê±´ ê²€ì‚¬
```lua
method boolean IsTriggerCondition(string triggerKey, string triggerName, Object invoker, Object receiver, table args, table result)
    return _Util:Call(self, triggerName .. "Condition", {triggerKey, invoker, receiver, result, _Table:Unpack(args)})
end
```

**ì¡°ê±´ë¶€ íŠ¸ë¦¬ê±° ì‹¤í–‰**:
- **íŠ¸ë¦¬ê±° í‚¤ ë§¤ì¹­**: "Play", "Death", "Summon" ë“±
- **ë°œë™ì/ìˆ˜ì‹ ì ê´€ê³„**: ìƒëŒ€ë°©/ì•„êµ° êµ¬ë¶„
- **ì¶”ê°€ ì¡°ê±´**: ì²´ë ¥, ìƒíƒœ, ìœ„ì¹˜ ë“± í™•ì¸

### ì¹´ë“œ íš¨ê³¼ êµ¬í˜„

#### íŠ¸ë¦¬ê±° ë©”ì„œë“œ ì˜ˆì‹œ
```lua
method void AirStrike(Card invoker, Card receiver)
    self.taskManager:RunProcess(function()
        local damage = 2
        -- ìƒëŒ€ë°© ì†íŒ¨ê°€ ë¹„ì–´ìˆìœ¼ë©´ ì¶”ê°€ ë°ë¯¸ì§€
        if #receiver.player.hand.cardArray == 0 then
            damage += 4
        end
        
        -- ìƒëŒ€ë°© í”Œë ˆì´ì–´ì—ê²Œ ë°ë¯¸ì§€
        receiver.player:Damage(invoker, damage)
    end)
end

-- AirStrike ë°œë™ ì¡°ê±´
method boolean AirStrikeCondition(string triggerKey, Object invoker, Object receiver, table result)
    return triggerKey == "Play" and 
           invoker:IsCard() and 
           receiver:IsPlayer() and 
           receiver ~= invoker.player
end
```

### ì¹´ë“œ ê³µê°œ ì‹œìŠ¤í…œ

#### íŠ¸ë¦¬ê±° ê¸°ë°˜ ì¹´ë“œ ê³µê°œ
```lua
method table ShareOpenCards(table invokerArray, table receiverArray, string triggerKey, table args, table eachArgs, table resultTable)
    if self:IsServer() then
        local cardSet = {}
        for _, receiver in ipairs(receiverArray) do
            if receiver:IsCard() and receiver.triggerNameArray then
                for _, triggerName in ipairs(receiver.triggerNameArray) do
                    if self:IsTriggerCondition(triggerKey, triggerName, invoker, receiver, args, result) and
                       _Util:HasAttribute(self, triggerName, "Open") then
                        cardSet[receiver] = true
                    end
                end
            end
        end
        cardArray = table.keys(cardSet)
        self.commandManager:PushPackage(cardArray)
    else
        cardArray = self.commandManager:PopPackage()
    end
    
    return cardArray
end
```

**ìë™ ì¹´ë“œ ê³µê°œ**:
- **ì¡°ê±´ë¶€ ê³µê°œ**: íŠ¸ë¦¬ê±° ë°œë™ ì‹œì—ë§Œ ê³µê°œ
- **ë™ê¸°í™”**: ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ë™ì¼í•œ ì¹´ë“œ ê³µê°œ
- **ì‹œê°ì  íš¨ê³¼**: ê³µê°œëœ ì¹´ë“œ ì•ë©´ìœ¼ë¡œ ì „í™˜

## ğŸ”„ 5. ë§¤ë‹ˆì € ê°„ ì—°ë™

### í†µí•© ì›Œí¬í”Œë¡œìš°

#### ì¹´ë“œ í”Œë ˆì´ ì‹œ ë§¤ë‹ˆì € í˜‘ì—…
```mermaid
sequenceDiagram
    participant P as Player
    participant CM as CommandManager
    participant DM as DeckManager  
    participant CAM as CardManager
    participant TM as TriggerManager
    
    P->>CM: RunCommand("Play", cardInfo)
    CM->>DM: ë±ì—ì„œ ì¹´ë“œ ìœ íš¨ì„± í™•ì¸
    CM->>CAM: ì¹´ë“œ ë°ì´í„° ì¡°íšŒ
    CM->>TM: Play íŠ¸ë¦¬ê±° ì‹¤í–‰
    TM->>CAM: íŠ¸ë¦¬ê±° ì¡°ê±´ì— í•„ìš”í•œ ì¹´ë“œ ì •ë³´ ì¡°íšŒ
    TM->>CM: ë³µì¡í•œ íš¨ê³¼ ë°ì´í„° ë™ê¸°í™”
```

### ë°ì´í„° ì¼ê´€ì„± ë³´ì¥

#### ë§¤ë‹ˆì €ë³„ ì±…ì„ ë¶„ë¦¬
- **CardManager**: ì¹´ë“œ ì›ë³¸ ë°ì´í„°ì˜ ì½ê¸° ì „ìš© ì ‘ê·¼
- **DeckManager**: ë± êµ¬ì„± ê·œì¹™ì˜ ì—„ê²©í•œ ê²€ì¦  
- **CommandManager**: ëª¨ë“  ë³€ê²½ì‚¬í•­ì˜ ë™ê¸°í™”
- **TriggerManager**: ë³µì¡í•œ ìƒí˜¸ì‘ìš©ì˜ ìˆœì°¨ ì‹¤í–‰

## ğŸ¯ 6. ì„±ëŠ¥ ìµœì í™”

### ë©”ëª¨ë¦¬ ê´€ë¦¬

#### íš¨ìœ¨ì ì¸ ë°ì´í„° êµ¬ì¡°
```lua
-- ì‚¬ì „ ê³„ì‚°ëœ ì¸ë±ì‹± í…Œì´ë¸”ë“¤
property table classCardNameTable = {}    -- ì§ì—…ë³„ ì¹´ë“œ ë¦¬ìŠ¤íŠ¸
property table costCardNameTable = {}     -- ë¹„ìš©ë³„ ì¹´ë“œ ë¦¬ìŠ¤íŠ¸  
property table tagCardNameTable = {}      -- íƒœê·¸ë³„ ì¹´ë“œ ë¦¬ìŠ¤íŠ¸
```

**ë©”ëª¨ë¦¬ vs ì„±ëŠ¥ íŠ¸ë ˆì´ë“œì˜¤í”„**:
- **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€**: ë‹¤ì–‘í•œ ì¸ë±ì‹± í…Œì´ë¸” ìœ ì§€
- **ê²€ìƒ‰ ì„±ëŠ¥ ê·¹ëŒ€í™”**: O(1) ì‹œê°„ ë³µì¡ë„ ë‹¬ì„±
- **ê²Œì„ ì‹œì‘ ì‹œ ë¡œë”©**: ëª¨ë“  ê³„ì‚°ì„ ì´ˆê¸°ì— ì™„ë£Œ

### ëª…ë ¹ ì²˜ë¦¬ ìµœì í™”

#### ë¹„ë™ê¸° ëª…ë ¹ í
```lua
-- í´ë¼ì´ì–¸íŠ¸ì˜ ëª…ë ¹ í ì²˜ë¦¬
while true do
    while _Queue:Front(self.commandQueue) do
        local command = _Queue:Pop(self.commandQueue)
        self:RunCommandInClient(command)
    end
    wait(0.01)  -- í”„ë ˆì„ë³„ ì²˜ë¦¬
end
```

## ğŸ’¡ ì½”ë“œ ì°¸ì¡°

í•µì‹¬ ë§¤ë‹ˆì € ì‹œìŠ¤í…œ ë¡œì§:
- `CardManager.mlua :: OnBeginPlay()` â€” ì¹´ë“œ ë°ì´í„° ì´ˆê¸°í™” ë° ì¸ë±ì‹±
- `CommandManager.mlua :: RunCommand()` â€” ëª…ë ¹ ì‹¤í–‰ ë° ë™ê¸°í™”
- `DeckManager.mlua :: IsDeckValid()` â€” ë± ìœ íš¨ì„± ê²€ì¦
- `TriggerManager.mlua :: InvokeTriggers()` â€” íŠ¸ë¦¬ê±° ì‹œìŠ¤í…œ ì‹¤í–‰
- `TriggerManager.mlua :: ShareOpenCards()` â€” ì¹´ë“œ ê³µê°œ ë™ê¸°í™”

í•µì‹¬ ë§¤ë‹ˆì € ì‹œìŠ¤í…œì€ ë©”ì´í”Œ ë“€ì–¼ì˜ ëª¨ë“  ë°ì´í„°ì™€ ë¡œì§ì„ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ë©°, ë³µì¡í•œ ì¹´ë“œ ê²Œì„ì˜ ê·œì¹™ê³¼ ìƒí˜¸ì‘ìš©ì„ ì •í™•í•˜ê³  íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²Œì„ì˜ ë‘ë‡Œì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
