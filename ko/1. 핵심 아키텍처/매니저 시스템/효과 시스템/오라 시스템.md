# ì˜¤ë¼ ì‹œìŠ¤í…œ

## ğŸ“‹ ê°œìš”

ì˜¤ë¼ ì‹œìŠ¤í…œì€ ë©”ì´í”Œ ë“€ì–¼ì—ì„œ ì¹´ë“œë‚˜ ë¯¸ë‹ˆì–¸ì´ ì£¼ë³€ ê°ì²´ë“¤ì—ê²Œ ì§€ì†ì ì¸ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ê³ ê¸‰ íš¨ê³¼ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. AuraManagerëŠ” 50ì—¬ ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ì˜¤ë¼ íš¨ê³¼ë¥¼ ê´€ë¦¬í•˜ë©°, ê° ì˜¤ë¼ëŠ” íŠ¹ì • ì¡°ê±´ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ëŒ€ìƒì„ ì„ íƒí•˜ê³  ë‹¤ì–‘í•œ ì¸ì±ˆíŠ¸ë¨¼íŠ¸ë¥¼ ì ìš©í•©ë‹ˆë‹¤. ì´ ì‹œìŠ¤í…œì€ ë‹¨ìˆœí•œ ë²„í”„/ë””ë²„í”„ë¥¼ ë„˜ì–´ì„œ ê²Œì„ ìƒí™©ì— ë”°ë¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³€í™”í•˜ëŠ” ë³µì¡í•œ ìƒí˜¸ì‘ìš©ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ë©°, ì „ëµì  ê¹Šì´ë¥¼ í¬ê²Œ ì¦ê°€ì‹œí‚µë‹ˆë‹¤.

**ê´€ë ¨ íŒŒì¼**:
- `RootDesk/MyDesk/Components/Managers/AuraManager.mlua` - ì˜¤ë¼ íš¨ê³¼ ì •ì˜ ë° ê´€ë¦¬
- `RootDesk/MyDesk/Components/Objects/Object.mlua` - ì˜¤ë¼ ì¸ì±ˆíŠ¸ë¨¼íŠ¸ ì ìš© ë©”ì»¤ë‹ˆì¦˜
- `RootDesk/MyDesk/Components/Managers/EnchantmentManager.mlua` - ì˜¤ë¼ ì œê±° ì¡°ê±´

## ğŸ—ï¸ ì˜¤ë¼ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì˜¤ë¼ ìƒëª…ì£¼ê¸°

```mermaid
graph TB
    A[ì˜¤ë¼ ì†ŒìŠ¤<br/>ì¹´ë“œ/ë¯¸ë‹ˆì–¸ ë“±ì¥] --> B[AuraManager]
    B --> C[ì¡°ê±´ í™•ì¸<br/>GetTargets]
    C --> D[ëŒ€ìƒ ì„ ì •<br/>ì¡°ê±´ ë§Œì¡± ê°ì²´ë“¤]
    
    D --> E[ì¸ì±ˆíŠ¸ë¨¼íŠ¸ ìƒì„±<br/>GetEnchantments]
    E --> F[Object ì ìš©<br/>auraEnchantmentArray]
    F --> G[ApplyEnchantments<br/>ì‹¤ì œ íš¨ê³¼ ì ìš©]
    
    G --> H[ê²Œì„ ìƒí™© ë³€í™”]
    H --> I{ëŒ€ìƒ ì¬ê²€ì¦}
    I -->|ë³€í™” ìˆìŒ| C
    I -->|ë³€í™” ì—†ìŒ| J[íš¨ê³¼ ìœ ì§€]
    
    K[ì˜¤ë¼ ì†ŒìŠ¤ ì œê±°] --> L[ì˜¤ë¼ ì¸ì±ˆíŠ¸ë¨¼íŠ¸<br/>ì¼ê´„ ì œê±°]
    
    style A fill:#ffcccc
    style G fill:#ccffcc
    style L fill:#ffccff
```

## ğŸŒŸ 1. ì˜¤ë¼ íš¨ê³¼ ì •ì˜ ì‹œìŠ¤í…œ

### ì¸ì±ˆíŠ¸ë¨¼íŠ¸ì™€ ëŒ€ìƒ ì •ì˜

#### ê¸°ë³¸ ì˜¤ë¼ êµ¬ì¡°
```lua
-- Shumi ì˜¤ë¼ - ë¯¸ë‹ˆì–¸ ë¹„ìš© ê°ì†Œ
method table ShumiEnchantments()
    return {
        {methodName = "AddCostEnchantment", args = {-1}}
    }
end

method table ShumiTargets(Minion minion)
    return minion.player.hand:GetCards(self.taskManager.minionSelector)
end
```

**ì˜¤ë¼ ì •ì˜ íŒ¨í„´**:
- **Enchantments**: ì ìš©í•  íš¨ê³¼ì˜ ë©”ì„œë“œëª…ê³¼ ì¸ì
- **Targets**: íš¨ê³¼ë¥¼ ë°›ì„ ëŒ€ìƒ ê°ì²´ë“¤ì˜ ë°°ì—´
- **ë™ì  ì¡°ê±´**: ê²Œì„ ìƒí™©ì— ë”°ë¥¸ ëŒ€ìƒ ë³€ê²½

#### ì¡°ê±´ë¶€ ì˜¤ë¼ ì‹œìŠ¤í…œ

##### Chicken - í”¼í•´ë°›ì€ ë¯¸ë‹ˆì–¸ì—ê²Œ ê³µê²©ë ¥ ì¦ê°€
```lua
method table ChickenEnchantments()
    return {
        {methodName = "AddAtkEnchantment", args = {3}}
    }
end

method table ChickenTargets(Minion minion)
    if minion:IsDamaged() then
        return {minion}  -- ìê¸° ìì‹ ì´ í”¼í•´ë°›ì•˜ì„ ë•Œë§Œ ì ìš©
    end
end
```

##### DancesWithBalrog - ë‹¤ë¥¸ í”¼í•´ë°›ì€ ë¯¸ë‹ˆì–¸ì—ê²Œ ê³µê²©ë ¥ ì¦ê°€
```lua
method table DancesWithBalrogEnchantments()
    return {
        {methodName = "AddAtkEnchantment", args = {2}}
    }
end

method table DancesWithBalrogTargets(Minion minion)
    return minion:GetOurOtherMinions(self.taskManager.damagedSelector)
end
```

### ë³µì¡í•œ ë™ì  ê³„ì‚° ì˜¤ë¼

#### GrimPhantomWatch - ë± í¬ê¸° ê¸°ë°˜ ë¹„ìš© ì¦ê°€
```lua
method table GrimPhantomWatchEnchantments(Card card)
    return {
        {methodName = "AddCostEnchantment", args = {#card.player.deck.cardArray}}
    }
end

method table GrimPhantomWatchTargets(Card card)
    return {card}  -- ìê¸° ìì‹ ì—ê²Œ ì ìš©
end
```

**ë™ì  ê³„ì‚° íŠ¹ì§•**:
- **ì‹¤ì‹œê°„ ê°’ ê³„ì‚°**: ë± ì¹´ë“œ ìˆ˜ì— ë”°ë¼ ë¹„ìš© ë³€ë™
- **ê²Œì„ ìƒíƒœ ì˜ì¡´**: ê²Œì„ ì§„í–‰ì— ë”°ë¥¸ íš¨ê³¼ í¬ê¸° ë³€í™”
- **ìê¸° ì°¸ì¡°**: ì˜¤ë¼ ì†ŒìŠ¤ê°€ ìì‹ ì—ê²Œ ì˜í–¥ ë¯¸ì¹¨

#### Panda - íƒœê·¸ ê¸°ë°˜ ëˆ„ì  íš¨ê³¼
```lua
method table PandaEnchantments(Card card)
    return {
        {methodName = "AddCostEnchantment", args = {-self.history:GetThisRoundMinionCountByTag(card.player, "Pet")}}
    }
end

method table PandaTargets(Card card)
    return {card}
end
```

**ê³ ê¸‰ ê³„ì‚° ìš”ì†Œ**:
- **History ë§¤ë‹ˆì € ì—°ë™**: ë¼ìš´ë“œë³„ í†µê³„ í™œìš©
- **íƒœê·¸ ì‹œìŠ¤í…œ**: íŠ¹ì • ì¹´í…Œê³ ë¦¬ ì¹´ë“œ ìˆ˜ ê¸°ë°˜ ê³„ì‚°
- **ìŒìˆ˜ íš¨ê³¼**: ë¹„ìš© ê°ì†Œ (ìŒìˆ˜ ë¹„ìš© ì¦ê°€)

## ğŸ¯ 2. ì˜¤ë¼ ëŒ€ìƒ ì„ ì • ì‹œìŠ¤í…œ

### ëŒ€ìƒ ë²”ìœ„ë³„ ë¶„ë¥˜

#### í”Œë ˆì´ì–´ ëŒ€ìƒ ì˜¤ë¼
```lua
-- Focus - í”Œë ˆì´ì–´ ì†íŒ¨ ìŠ¤í‚¬ ë¹„ìš© ê°ì†Œ
method table FocusTargets(Player player)
    return player.hand:GetCards(self.taskManager.skillSelector)
end

-- ShadowPartner - í”Œë ˆì´ì–´ ìŠ¤í‚¬ ë°ë¯¸ì§€ ì¦ê°€
method table ShadowPartnerTargets(Player player)
    return {player}
end
```

#### í•„ë“œ ê¸°ë°˜ ì˜¤ë¼
```lua
-- DrummingBunny - ì•„êµ° ë‹¤ë¥¸ ë¯¸ë‹ˆì–¸ë“¤ ê³µê²©ë ¥ ì¦ê°€
method table DrummingBunnyTargets(Minion minion)
    return minion:GetOurOtherMinions(nil)
end

-- Octopus - ëª¨ë“  ë¯¸ë‹ˆì–¸ ì¹´ë“œ ë¹„ìš© ì¦ê°€
method table OctopusTargets(Minion minion)
    return self.duel:GetCards(self.taskManager.minionSelector)
end
```

#### ê²Œì„ ì „ì²´ ì˜í–¥ ì˜¤ë¼
```lua
-- MrBouffon - ë“€ì–¼ ìì²´ì— ëœë¤ ë°°í‹€ ì ìš©
method table MrBouffonTargets(Minion minion)
    return {self.duel}
end
```

### ì¡°ê±´ë¶€ ëŒ€ìƒ ì„ ì •

#### ë³µí•© ì¡°ê±´ ì‹œìŠ¤í…œ
```mermaid
graph TB
    A[ì˜¤ë¼ í™œì„±í™”] --> B{ëŒ€ìƒ ì¡´ì¬ í™•ì¸}
    B -->|Minion| C{í•„ë“œì— ìˆëŠ”ê°€?}
    B -->|Card| D{ì†íŒ¨/ë±ì— ìˆëŠ”ê°€?}
    
    C -->|Yes| E[GetOurOtherMinions]
    C -->|No| F[ë¹ˆ ë°°ì—´ ë°˜í™˜]
    
    D -->|Yes| G[ì„ íƒì ì ìš©]
    D -->|No| F
    
    E --> H[ì¡°ê±´ í•„í„°ë§]
    G --> H
    H --> I[ìµœì¢… ëŒ€ìƒ ë°°ì—´]
    
    style C fill:#ffcccc
    style D fill:#ffffcc
    style H fill:#ccffcc
```

#### ëŒ€ìƒ ìœ íš¨ì„± ê²€ì¦
```lua
method table GetTargets(any object, string auraName)
    -- ë¯¸ë‹ˆì–¸ ìœ íš¨ì„± ê²€ì‚¬
    if object:IsMinion() then
        if not isvalid(object.field) then
            return {}  -- í•„ë“œì— ì—†ìœ¼ë©´ ì˜¤ë¼ ë¬´íš¨
        end
    -- ì¹´ë“œ ìœ íš¨ì„± ê²€ì‚¬  
    elseif object:IsCard() then
        if not isvalid(object.hand) and not isvalid(object.deck) then
            return {}  -- ì†íŒ¨ë‚˜ ë±ì— ì—†ìœ¼ë©´ ì˜¤ë¼ ë¬´íš¨
        end
    end
    
    return _Util:Call(self, auraName .. "Targets", {object}) or {}
end
```

## ğŸ”§ 3. ì¸ì±ˆíŠ¸ë¨¼íŠ¸ ì ìš© ë©”ì»¤ë‹ˆì¦˜

### Object ì»´í¬ë„ŒíŠ¸ í†µí•©

#### ì˜¤ë¼ ì¸ì±ˆíŠ¸ë¨¼íŠ¸ ê´€ë¦¬
```lua
-- Object.mluaì˜ ì˜¤ë¼ ì¸ì±ˆíŠ¸ë¨¼íŠ¸ ë°°ì—´
property table auraEnchantmentArray = {}

method void InsertAuraEnchantments(table auraEnchantmentArray)
    for _, auraEnchantment in ipairs(auraEnchantmentArray) do
        table.insert(self.auraEnchantmentArray, auraEnchantment)
    end
end

method void ClearAuraEnchantments()
    table.clear(self.auraEnchantmentArray)
end
```

#### ì¸ì±ˆíŠ¸ë¨¼íŠ¸ ì ìš© í”„ë¡œì„¸ìŠ¤
```lua
method void ApplyEnchantments()
    -- 1. ì›ë³¸ ìŠ¤íƒ¯ìœ¼ë¡œ ì´ˆê¸°í™”
    self.dependentVariableTable = _Table:ShallowCopy(self.entry)
    
    -- 2. ì¼ë°˜ ì¸ì±ˆíŠ¸ë¨¼íŠ¸ ì ìš©
    for _, enchantment in ipairs(self.enchantmentArray) do
        _Util:Call(self, enchantment.methodName, enchantment.args)
    end
    
    -- 3. ì˜¤ë¼ ì¸ì±ˆíŠ¸ë¨¼íŠ¸ ì ìš©
    for _, auraEnchantment in ipairs(self.auraEnchantmentArray) do
        _Util:Call(self, auraEnchantment.methodName, auraEnchantment.args)
    end
    
    -- 4. ìµœì¢… ìŠ¤íƒ¯ ì ìš©
    self:SetVariables(self.dependentVariableTable)
end
```

**ì ìš© ìˆœì„œì˜ ì¤‘ìš”ì„±**:
- **ê¸°ë³¸ê°’ â†’ ì¼ë°˜ ì¸ì±ˆíŠ¸ë¨¼íŠ¸ â†’ ì˜¤ë¼ ì¸ì±ˆíŠ¸ë¨¼íŠ¸**
- **ì¤‘ë³µ íš¨ê³¼ ëˆ„ì **: ì—¬ëŸ¬ ì˜¤ë¼ê°€ ê°™ì€ ìŠ¤íƒ¯ì— ì˜í–¥ ì‹œ ëˆ„ì 
- **ì‹¤ì‹œê°„ ì¬ê³„ì‚°**: ê²Œì„ ìƒí™© ë³€í™” ì‹œ ì „ì²´ ì¬ì ìš©

### ì¸ì±ˆíŠ¸ë¨¼íŠ¸ ìœ í˜•ë³„ ì²˜ë¦¬

#### ìŠ¤íƒ¯ ìˆ˜ì • ì¸ì±ˆíŠ¸ë¨¼íŠ¸
```lua
-- ë¹„ìš© ìˆ˜ì •
method void AddCostEnchantment(integer cost)
    local currentCost = self.dependentVariableTable.cost or self.entry.cost
    self.dependentVariableTable.cost = currentCost + cost
end

-- ê³µê²©ë ¥ ìˆ˜ì •  
method void AddAtkEnchantment(integer atk)
    local currentAtk = self.dependentVariableTable.atk or self.entry.atk
    self.dependentVariableTable.atk = currentAtk + atk
end

-- ìŠ¤í‚¬ ë°ë¯¸ì§€ ìˆ˜ì •
method void AddSkillDamageEnchantment(integer skillDamage)
    local currentDamage = self.dependentVariableTable.skillDamage or 0
    self.dependentVariableTable.skillDamage = currentDamage + skillDamage
end
```

#### ìƒíƒœ í”Œë˜ê·¸ ì¸ì±ˆíŠ¸ë¨¼íŠ¸
```lua
-- ì§ì ‘ ê³µê²© ë©´ì—­
method void SetImmuneToDirectAttackEnchantment(boolean isImmune)
    self.dependentVariableTable.isImmuneToDirectAttack = isImmune
end

-- ëœë¤ ë°°í‹€ ëª¨ë“œ
method void SetRandomBattleEnchantment(boolean randomBattle)
    self.dependentVariableTable.randomBattle = randomBattle
end
```

## ğŸ”„ 4. ì˜¤ë¼ ë™ì  ê°±ì‹  ì‹œìŠ¤í…œ

### ì‹¤ì‹œê°„ ì˜¤ë¼ ê´€ë¦¬

#### ê²Œì„ ì´ë²¤íŠ¸ ê¸°ë°˜ ê°±ì‹ 
```mermaid
sequenceDiagram
    participant GM as Game Event
    participant TM as TaskManager  
    participant AM as AuraManager
    participant Obj as Target Objects
    
    GM->>TM: ë¯¸ë‹ˆì–¸ ì†Œí™˜/ì œê±°
    TM->>AM: UpdateAuras() í˜¸ì¶œ
    
    AM->>AM: GetTargets() ì¬ê³„ì‚°
    Note right of AM: ëª¨ë“  ì˜¤ë¼ ì†ŒìŠ¤ í™•ì¸
    
    AM->>Obj: ClearAuraEnchantments()
    AM->>Obj: InsertAuraEnchantments(newAuras)
    Obj->>Obj: ApplyEnchantments()
    
    Note right of Obj: ìƒˆë¡œìš´ ìŠ¤íƒ¯ìœ¼ë¡œ ì—…ë°ì´íŠ¸
```

#### ì¡°ê±´ ë³€í™” ê°ì§€
```lua
-- ë¯¸ë‹ˆì–¸ ì²´ë ¥ ë³€í™” ì‹œ Chicken ì˜¤ë¼ ì¬í‰ê°€
method void OnMinionDamaged(Minion minion)
    local chickenMinions = self.duel:GetMinions(function(m) 
        return m.name == "Chicken" 
    end)
    
    for _, chicken in ipairs(chickenMinions) do
        self:UpdateAuraTargets(chicken, "Chicken")
    end
end
```

**ê°±ì‹  íŠ¸ë¦¬ê±° ì´ë²¤íŠ¸**:
- **ë¯¸ë‹ˆì–¸ ì†Œí™˜/ì œê±°**: í•„ë“œ ìƒí™© ë³€í™”
- **ì¹´ë“œ ë“œë¡œìš°/í”Œë ˆì´**: ì†íŒ¨ êµ¬ì„± ë³€í™”  
- **ì²´ë ¥/ìƒíƒœ ë³€í™”**: ì¡°ê±´ ë§Œì¡±ë„ ë³€í™”
- **ë¼ìš´ë“œ ì§„í–‰**: ì‹œê°„ ê¸°ë°˜ ì¡°ê±´ ë³€í™”

## ğŸ² 5. ê³ ê¸‰ ì˜¤ë¼ íš¨ê³¼ ì‚¬ë¡€

### ëˆ„ì  íš¨ê³¼ ì˜¤ë¼

#### Roloduck - í•„ë“œ ë¯¸ë‹ˆì–¸ ìˆ˜ ê¸°ë°˜ ìì²´ ê°•í™”
```lua
method table RoloduckEnchantments(Minion minion)
    return {
        {methodName = "AddAtkEnchantment", args = {#minion:GetOurOtherMinions(nil)}}
    }
end

method table RoloduckTargets(Minion minion)
    return {minion}  -- ìê¸° ìì‹  ê°•í™”
end
```

**ëˆ„ì  ë©”ì»¤ë‹ˆì¦˜**:
- **ë™ì  ê°’ ê³„ì‚°**: ì•„êµ° ë¯¸ë‹ˆì–¸ ìˆ˜ì— ë¹„ë¡€í•˜ì—¬ ê³µê²©ë ¥ ì¦ê°€
- **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸**: ë¯¸ë‹ˆì–¸ ì¶”ê°€/ì œê±° ì‹œ ì¦‰ì‹œ ë°˜ì˜
- **ìê¸° ê°•í™”**: ë‹¤ë¥¸ ë¯¸ë‹ˆì–¸ì´ ë§ì„ìˆ˜ë¡ ìì‹ ì´ ê°•í•´ì§

### ì¡°ê±´ë¶€ ë¹„ìš© ì¡°ì‘

#### TripleThrow - ìƒëŒ€ë°© í•„ë“œ ì¡°ê±´ë¶€ ë¹„ìš© ê°ì†Œ
```lua
method table TripleThrowEnchantments()
    return {
        {methodName = "AddCostEnchantment", args = {-1}}
    }
end

method table TripleThrowTargets(Card card)
    if #card.player.opponent.field:GetMinions(nil) >= 2 then
        return {card}
    end
end
```

**ì „ëµì  ì¡°ê±´**:
- **ìƒëŒ€ë°© ì˜ì¡´**: ìƒëŒ€ë°©ì˜ ì „ëµì— ë”°ë¼ íš¨ê³¼ í™œì„±í™”
- **ì„ê³„ê°’ ì¡°ê±´**: íŠ¹ì • ìˆ˜ì¹˜ ì´ìƒì—ì„œë§Œ íš¨ê³¼ ë°œë™
- **ìê¸° ìµœì í™”**: ìœ ë¦¬í•œ ìƒí™©ì—ì„œë§Œ ë¹„ìš© ì ˆì•½

### ê¸€ë¡œë²Œ ê²Œì„ ê·œì¹™ ë³€ê²½

#### MrBouffon - ëœë¤ ë°°í‹€ ëª¨ë“œ í™œì„±í™”
```lua
method table MrBouffonEnchantments()
    return {
        {methodName = "SetRandomBattleEnchantment", args = {true}}
    }
end

method table MrBouffonTargets(Minion minion)
    return {self.duel}  -- ë“€ì–¼ ì „ì²´ì— ì˜í–¥
end
```

**ê²Œì„ ë£° ìˆ˜ì •**:
- **ì „ì—­ íš¨ê³¼**: ëª¨ë“  ì „íˆ¬ì— ëœë¤ ìš”ì†Œ ì¶”ê°€
- **ë©”íƒ€ ê²Œì„ ë³€ê²½**: ê¸°ë³¸ ê²Œì„ ê·œì¹™ ìì²´ë¥¼ ìˆ˜ì •
- **ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥ì„±**: ì „ëµì  ê³„ì‚°ì„ ë³µì¡í•˜ê²Œ ë§Œë“¦

## ğŸ” 6. ì„±ëŠ¥ ìµœì í™”

### ì§€ì—° í‰ê°€ ì‹œìŠ¤í…œ

#### í•„ìš” ì‹œì  ê³„ì‚°
```lua
-- ì˜¤ë¼ íš¨ê³¼ê°€ í•„ìš”í•  ë•Œë§Œ ëŒ€ìƒ ê³„ì‚°
method table GetTargets(any object, string auraName)
    if not self:IsObjectValid(object) then
        return {}  -- ë¹ ë¥¸ ì‹¤íŒ¨ë¡œ ë¶ˆí•„ìš”í•œ ê³„ì‚° ë°©ì§€
    end
    
    local targets = _Util:Call(self, auraName .. "Targets", {object})
    return targets or {}
end
```

#### ìºì‹± ì „ëµ
```lua
-- ë³µì¡í•œ ê³„ì‚° ê²°ê³¼ ìºì‹±
local auraCache = {}

method table GetCachedAuraTargets(Object object, string auraName)
    local cacheKey = string.format("%s_%s_%d", object.name, auraName, self.duel.round)
    
    if auraCache[cacheKey] then
        return auraCache[cacheKey]
    end
    
    local targets = self:GetTargets(object, auraName)
    auraCache[cacheKey] = targets
    return targets
end
```

### ë°°ì¹˜ ì—…ë°ì´íŠ¸

#### ë‹¨ì¼ ì´ë²¤íŠ¸ë¡œ ë‹¤ì¤‘ ì˜¤ë¼ ê°±ì‹ 
```lua
method void UpdateAllAuras()
    local allAuraSources = self.duel:GetObjects(function(obj)
        return not _Table:IsEmpty(obj.auraNameArray)
    end)
    
    -- ëª¨ë“  ëŒ€ìƒì˜ ì˜¤ë¼ ì¸ì±ˆíŠ¸ë¨¼íŠ¸ ì´ˆê¸°í™”
    for _, object in ipairs(self.duel.objectArray) do
        object:ClearAuraEnchantments()
    end
    
    -- ëª¨ë“  ì˜¤ë¼ ì†ŒìŠ¤ì—ì„œ ìƒˆë¡œìš´ ì¸ì±ˆíŠ¸ë¨¼íŠ¸ ìƒì„±
    for _, source in ipairs(allAuraSources) do
        for _, auraName in ipairs(source.auraNameArray) do
            local targets = self:GetTargets(source, auraName)
            local enchantments = self:GetEnchantments(source, auraName)
            
            for _, target in ipairs(targets) do
                target:InsertAuraEnchantments(enchantments)
            end
        end
    end
    
    -- ëª¨ë“  ëŒ€ìƒì— ì¸ì±ˆíŠ¸ë¨¼íŠ¸ ì ìš©
    for _, object in ipairs(self.duel.objectArray) do
        object:ApplyEnchantments()
    end
end
```

## ğŸ’¡ ì½”ë“œ ì°¸ì¡°

ì˜¤ë¼ ì‹œìŠ¤í…œ í•µì‹¬ ë¡œì§:
- `AuraManager.mlua :: GetTargets()` â€” ë™ì  ì˜¤ë¼ ëŒ€ìƒ ì„ ì •
- `AuraManager.mlua :: PandaEnchantments()` â€” ë³µì¡í•œ ë™ì  ê³„ì‚° ì˜¤ë¼
- `Object.mlua :: ApplyEnchantments()` â€” ì¸ì±ˆíŠ¸ë¨¼íŠ¸ ì ìš© ë©”ì»¤ë‹ˆì¦˜
- `Object.mlua :: InsertAuraEnchantments()` â€” ì˜¤ë¼ ì¸ì±ˆíŠ¸ë¨¼íŠ¸ ê´€ë¦¬
- `AuraManager.mlua :: MrBouffonTargets()` â€” ê¸€ë¡œë²Œ ê²Œì„ ê·œì¹™ ë³€ê²½

ì˜¤ë¼ ì‹œìŠ¤í…œì€ ë©”ì´í”Œ ë“€ì–¼ì˜ ì „ëµì  ë³µì¡ì„±ì„ í¬ê²Œ ë†’ì´ëŠ” ê³ ê¸‰ ì‹œìŠ¤í…œìœ¼ë¡œ, ì •ì ì¸ ì¹´ë“œ ìŠ¤íƒ¯ì„ ë™ì ì´ê³  ìƒí™©ì— ë§ëŠ” ì „ëµì  ìì›ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ë§¤ ê²Œì„ë§ˆë‹¤ ìƒˆë¡œìš´ ì „ëµì  ê°€ëŠ¥ì„±ì„ ì œê³µí•©ë‹ˆë‹¤.
